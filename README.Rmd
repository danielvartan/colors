---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, eval=FALSE, include=FALSE}
library(dplyr)
library(gt, quietly = TRUE)
library(here, quietly = TRUE)
library(knitr, quietly = TRUE)
library(magrittr)
library(purrr, quietly = TRUE)
library(readr, quietly = TRUE))
library(yaml, quietly = TRUE)
```

```{r, include=FALSE}
library(magrittr)
```

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  out.width = "100%"
)
```

# html-colors

<!-- badges: start -->
[![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![License: MIT](https://img.shields.io/badge/license-MIT-green)](https://choosealicense.com/licenses/mit/)
<!-- badges: end -->

## Overview

`html-colors` is a package that allows you to insert HTML color codes into your text using [Espanso](https://espanso.org). It replaces shortcuts like `::red` with their corresponding hex color codes `#FF0000`. You can use it with the [`html-utils-package`](https://hub.espanso.org/html-utils-package).

Click [here](https://htmlcolorcodes.com/) to visualize all the colors.

The package is based on [this gist](https://gist.github.com/jennyknuth/e2d9ee930303d5a5fe8862c6e31819c5) by [Jenny Knuth](https://gist.github.com/jennyknuth). Thank you, Jenny! :)

## Installation

You can install the released version of `html-colors` from [Espanso Hub](https://hub.espanso.org/) with:

``` sh
espanso install html-colors
```

And the development version from [GitHub](https://github.com/) with:

``` sh
espanso install html-colors --git https://github.com/danielvartan/html-colors/ --external
```

## Usage

This package replaces the listed shortcuts with the corresponding characters while typing.

```{r, echo=FALSE}
match_file <- here::here("src", "package.yml")
```

```{r, echo=FALSE}
data <- 
  match_file |>
  readr::read_lines(skip = 1) %>%
  yaml::read_yaml(text = .) |>
  purrr::map_dfr(~tibble::as_tibble(.x)) |>
  dplyr::mutate(
    hex_code = dplyr::case_when(
      stringr::str_detect(trigger, "rgb-") ~ dplyr::lag(replace, n = 1),
      stringr::str_detect(trigger, "families-") ~ dplyr::lag(replace, n = 2),
      TRUE ~ replace
    )
  ) |>
  dplyr::mutate(
    # hex_code = dplyr::case_when(
    #   stringr::str_detect(trigger, "rgb-") ~ "",
    #   stringr::str_detect(trigger, "families-") ~ "",
    #   TRUE ~ stringr::str_replace(replace, "#", "")
    # ),
    color = dplyr::if_else(
      condition = is.na(hex_code),
      true = hex_code,
      false = paste0(
        "![#",
        hex_code,
        "](https://placehold.co/15x15/",
        hex_code,
        "/",
        hex_code,
        ".png)"
      )
    )
  ) |>
  # dplyr::select(trigger, replace, color) |>
  dplyr::rename(
    Shortcut = trigger,
    Character = replace,
    Color = color
  )
```

```{r, echo=FALSE}
table <- 
  data |>
  dplyr::select(Shortcut, Character, Color) |>
  dplyr::mutate(Color = "")

tb <- table |> gt::gt()

for (i in seq_len(nrow(table))) {
  tb <- 
    tb |>
    gt::tab_style(
      style = gt::cell_fill(color = data$hex_code[i]),
      locations = gt::cells_body(
        columns = Color,
        rows = i
      )
    )
}
```

```{r, echo=FALSE}
tb
```

## License

[![License:
MIT](https://img.shields.io/badge/license-MIT-green)](https://opensource.org/license/mit/)

`html-colors` code is released under the [MIT license](https://opensource.org/license/mit/).
